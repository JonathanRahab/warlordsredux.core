<!DOCTYPE html><html lang="en"><head><style>*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}body,html{height:100%;text-align:center;overflow:hidden}.menu-wrapper{display:inline-block;width:80vw;height:80vh;border-radius:10px;border:2px solid #444;background-color:#2a2a2a;position:absolute;left:10vw;top:10vh}.menu-title{background-color:#222;color:#fff;padding:15px;font-size:24px;font-weight:700;border-bottom:2px solid #444}.close-button{position:absolute;top:10px;right:10px;background-color:rgba(0,0,0,.3);width:40px;height:40px;font-size:30px;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:3px}.close-button:hover{background-color:rgba(0,0,0,.7)}.fps-display{position:fixed;top:10px;left:10px;background-color:#000;color:#fff;padding:5px 10px;border-radius:5px;font-size:14px;z-index:1000}</style><style>.menu-wrapper{background:#2b2f33;color:#e6e6e6;--bg-1:#2b2f33;--bg-2:#34383d;--bg-3:#3a3f45;--bg-4:#40464d;--line-1:#1f2327;--line-2:#262b30;--muted:#b7bec6;--accent-blue:#6aa7ff;--accent-red:#ff6a6a;--accent-amber:#ffc04d;--accent-green:#61d095}.mod-content{font-family:Arial,sans-serif;position:absolute;top:62px;bottom:0;left:0;right:0;display:flex;gap:1rem;overflow:hidden;min-height:0;scrollbar-width:thin;scrollbar-color:#444 #2a2a2a}.players-panel{flex:1 1 20rem}.player-details-panel{flex:1.2 1 26rem;visibility:hidden}.chat-panel{flex:1.2 1 26rem}.block-title,.panel-subtitle,.panel-title{font-weight:800;padding:.6rem .9rem;letter-spacing:.03em;text-transform:uppercase}.block-title,.panel-subtitle{font-size:.92rem;color:var(--muted)}.block{padding:.4rem}.players-panel{display:grid;grid-auto-rows:auto;grid-template-rows:auto 1fr;gap:0;overflow:hidden;min-height:0}.list{list-style:none;margin:0;padding:0}.player-item,.report-item,.timeout-item{border:1px solid var(--line-2);padding:.6rem .8rem;margin:.2rem 0;background:var(--bg-3)}.chat-msg:hover,.player-item:hover,.report-item:hover,.timeout-item:hover{background:var(--bg-4)}.player-row{display:flex;justify-content:space-between;gap:.8rem}.player-name{font-weight:800;color:#fff}.chat-text{color:var(--muted)}.report-item{text-align:left}.report-from{margin-right:1em}#player-list{min-height:0;overflow:auto;padding-right:.2rem}.player-details-panel{display:flex;flex-direction:column;overflow:auto;min-height:0}#selected-player-header{padding:.8rem .9rem;border-bottom:1px solid var(--line-2);font-size:1.2em}.selected,.selected *,.selected:hover{color:var(--line-1)!important;background-color:#f5f5f5!important}.label{font-weight:700;color:#fff}#chat-export,#player-info,input,select,textarea{font:inherit;background:var(--bg-3);color:#e6e6e6;padding:.5rem .65rem;border:0}#chat-export{width:100%;height:10rem;resize:none}#player-info{width:100%;min-height:6rem;resize:none}#timeout-records{max-height:5rem;overflow:auto}.timeout-form{display:flex;flex-direction:column;gap:.6rem;padding:0 .9rem .9rem}#timeout-minutes{max-width:8rem}#timeout-reason{width:100%}.chat-panel{display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;min-height:0}#chat-current-filter{color:var(--muted);font-weight:700;letter-spacing:.02em;text-align:left;padding:.6rem .9rem;border:1px solid var(--line-2)}#chat-current-filter:hover{cursor:pointer;background:var(--bg-4)}#chat-channels{display:flex;gap:.6rem}.chat-channel,.chat-player{cursor:pointer;padding:.25rem .5rem;background:var(--bg-3);color:#e6e6e6;font-weight:700;font-size:.9rem}.chat-channel:hover,.chat-player:hover,button:hover{background:var(--bg-4)}#chat-log{min-height:0;overflow:auto;border-top:1px solid var(--line-2);border-bottom:1px solid var(--line-2)}#chat-messages{overflow:auto;height:100%}.chat-channel,.chat-msg,.chat-player,button{border:1px solid var(--line-2)}.chat-msg{padding:.4rem .5rem;margin:.2rem 0;background:var(--bg-3);text-align:left;display:flex;gap:.6rem;align-items:baseline}#player-info,.timeout-clear,.timeout-end,.timeout-uid{font-family:Consolas,monospace;color:var(--accent-green)}.timeout-clear,.timeout-end,.timeout-uid{font-weight:700}.timeout-clear{padding:.2rem .4rem}.chat-time{font-family:Consolas,monospace;font-weight:700;color:var(--accent-amber)}.chat-text{text-align:left}.chat-channel,.report-from{color:var(--accent-blue)}button{font:inherit;cursor:pointer;background:#3f454b;color:#e6e6e6;padding:.5rem .75rem}button:active{opacity:.8}#btn-timeout{background:#462c2c;border-color:#5b3434;width:100%;color:#ffb3b3}#btn-timeout:hover{background:#553535}#btn-clear-reports,#btn-mod-receipts{background:#4a3f2a;border-color:#5a4a33;color:#ffdca3;width:100%}#btn-clear-reports:hover,#btn-mod-receipts:hover{background:#554833}#btn-goto,#btn-rebalance,#btn-see-transfers,#btn-vehicles{background:#2d3a4b;border-color:#364354;color:#b7d7ff;width:100%}#btn-goto:hover,#btn-rebalance:hover,#btn-see-transfers:hover,#btn-vehicles:hover{background:#344155}.row{display:flex;align-items:center;gap:.8rem;margin-bottom:.4rem}.player-aliases,.player-reports,.report-reason,.timeout-name{color:var(--muted)}.player-reports{display:inline-flex;align-items:center;justify-content:center;width:2em;height:2em;font-size:10pt;border-radius:50%;background-color:var(--accent-red)!important;color:#f5f5f5!important}.player-reports:empty{background-color:transparent!important;border:0!important}.player-aliases{text-align:left;font-size:8pt}#selected-player-name{color:#fff}.timeout-item{padding:2px 16px;margin:.2em 0}.timeout-row{display:flex;align-items:center;justify-content:space-between;font-size:8pt}.timeout-clear:hover{background-color:var(--accent-red)}</style></head><body><div class="menu-wrapper"><div class="menu-title">Moderate</div><div class="mod-content"><div class="players-panel"><div class="panel-title">Players</div><ul class="list panel players" id="player-list"></ul><div class="panel-subtitle">Timed Out</div><ul class="list panel timeouts" id="timeout-records"></ul></div><div class="panel player-details-panel"><div id="selected-player-header"><div class="label" id="selected-player-name">Selected Player Name</div></div><div class="block"><textarea id="player-info"></textarea></div><div class="block timeout-form"><div class="block-title">Timeout</div><div class="row"><label class="label" for="timeout-minutes">Minutes</label> <input id="timeout-minutes" name="minutes" max="120" min="1" step="1" type="number" value="15"></div><div class="row"><label class="label" for="timeout-reason-select">Reason</label> <input id="timeout-reason" name="reason-custom" placeholder="unsportsmanlike conduct"></div><div class="row"><button id="btn-timeout" type="button">Timeout player</button></div></div><div class="block"><div class="block-title">Actions</div><div class="row"><button id="btn-rebalance" type="button">Rebalance player</button></div><div class="row"><button id="btn-vehicles" type="button">Access player vehicles</button></div><div class="row"><button id="btn-goto" type="button">Fast travel to player</button></div><div class="row"><button id="btn-see-transfers" type="button">See player transfers</button></div></div><div class="block"><div class="block-title">Reports</div><ul class="list reports" id="player-reports"></ul><div class="row"><button id="btn-clear-reports" type="button">Clear Reports</button></div></div></div><div class="chat-panel"><div class="panel-title">Chat</div><div id="chat-current-filter">Showing all messages</div><div id="chat-log"><ul class="list panel" id="chat-messages"></ul></div><textarea id="chat-export" placeholder="Double click chat line to copy here"></textarea> <button id="btn-mod-receipts" type="button">MOD RECEIPTS</button></div></div></div><script>function patchList(e,t,{key:n,create:a,update:c,itemSelector:l=":scope > *",keepSelection:s=!1,selectedClass:o="selected"}){if(!e)return;let r=null;if(s){const t=e.querySelector(`.${o}`);t&&(r=t.dataset.uid||t.dataset.key||null)}const d=new Map;e.querySelectorAll(l).forEach(e=>{const t=e.dataset.uid||e.dataset.key;t&&d.set(t,e)});const i=document.createDocumentFragment();for(const e of t){const t=n(e);let l=d.get(t);l?(c(l,e),d.delete(t)):(l=a(e),l.dataset.uid||l.dataset.key||(l.dataset.uid=t)),i.appendChild(l)}for(const e of d.values())e.remove();if(e.replaceChildren(i),s&&r){const t=e.querySelector(`[data-uid="${r}"], [data-key="${r}"]`);t&&t.classList.add(o)}}function createTimedOutListItem(e,t){const n=document.createElement("li");n.className="timeout-item",n.dataset.uid=e.uid;const a=document.createElement("div");a.className="timeout-row";const c=document.createElement("span");c.className="timeout-uid",c.textContent=e.uid;const l=document.createElement("span");l.className="timeout-end",l.textContent=e.end;const s=document.createElement("button");return s.className="timeout-clear",s.textContent="Clear",s.addEventListener("click",()=>{A3API.SendAlert(`["clearTimeout", "${e.uid}"]`)}),a.appendChild(c),a.appendChild(l),a.appendChild(s),n.appendChild(a),n}function updateTimedOutListItem(e,t){e.dataset.uid=t.uid;const n=e.querySelector(".timeout-uid");n&&n.textContent!==t.uid&&(n.textContent=t.uid);const a=e.querySelector(".timeout-end");a&&a.textContent!==t.end&&(a.textContent=t.end)}function updateTimeouts(e){e=JSON.parse(e||"[]");const t=document.getElementById("timeout-records");if(!t)return;const n=e.map(([e,t])=>({uid:e,end:t}));patchList(t,n,{key:e=>e.uid,create:e=>createTimedOutListItem(e,t),update:updateTimedOutListItem,itemSelector:".timeout-item",keepSelection:!0,selectedClass:"selected"})}function createPlayerListItem(e,t){const n=document.createElement("li");n.className="player-item",n.dataset.uid=e.uid;const a=document.createElement("div");a.className="player-row";const c=document.createElement("span");c.className="player-name",c.textContent=e.name;const l=document.createElement("div");l.className="player-reports",l.textContent=e.reports?`${e.reports}`:"",a.appendChild(c),a.appendChild(l);const s=document.createElement("div");return s.className="player-aliases",s.textContent=e.aliases.length?`AKA: ${e.aliases.join(", ")}`:"",n.appendChild(a),n.appendChild(s),n.addEventListener("click",()=>selectPlayer(e,t)),n}function updatePlayerListItem(e,t){e.dataset.id=String(t.id??""),e.querySelector(".player-name").textContent=t.name,e.querySelector(".player-reports").textContent=t.reports?`${t.reports}`:"",e.querySelector(".player-aliases").textContent=t.aliases.length?`AKA: ${t.aliases.join(", ")}`:""}function updatePlayers(e){e=JSON.parse(e||"[]");const t=document.getElementById("player-list"),n=e.map(e=>({uid:e[0],name:e[1],aliases:e[2],reports:e[3]}));patchList(t,n,{key:e=>e.uid,create:e=>createPlayerListItem(e,t),update:updatePlayerListItem,itemSelector:".player-item",keepSelection:!0,selectedClass:"selected",stickToBottom:!1})}function selectPlayer(e,t){const n=t.querySelector(".player-item.selected");n&&n.classList.remove("selected");const a=t.querySelector(`.player-item[data-uid="${e.uid}"]`);a&&a.classList.add("selected"),A3API.SendAlert(`["select", "${e.uid}"]`)}function updatePlayerInfo(e){const t=(e=JSON.parse(e||"[]"))[0]||"";document.selectedPlayer=t;const n=e[1]||"";document.selectedPlayerName=n,document.getElementById("selected-player-name").textContent=n,document.getElementById("player-info").value=e[2]||"";const a=document.getElementById("player-reports");a.innerHTML="";for(const[t,n]of e[3]){const e=document.createElement("li");e.className="report-item",e.innerHTML=`<span class="report-from">By: ${t}</span> <span class="report-reason">${n}</span>`,a.appendChild(e)}changeButtons(),document.querySelector(".player-details-panel").style.visibility="visible"}function makeChatUid(e,t,n,a){return`${e}||${t}||${n}||${a}`}function createChatMsgItem(e){const{timestamp:t,channel:n,player:a,text:c,uid:l}=e,s=document.createElement("li");s.className="chat-msg",s.dataset.uid=l,s.dataset.channel=n,s.dataset.player=a;const o=document.createElement("span");o.className="chat-time",o.textContent=t;const r=document.createElement("span");r.className="chat-channel",r.dataset.channel=n,r.textContent=n,r.addEventListener("click",()=>filterChatByChannel(n));const d=document.createElement("span");d.className="chat-player",d.dataset.player=a,d.textContent=a,d.addEventListener("click",()=>filterChatByPlayer(a)),d.style.visibility=a?"visible":"hidden";const i=document.createElement("span");return i.className="chat-text",i.textContent=c,s.append(o,r,d,i),s.addEventListener("dblclick",()=>{const e=document.getElementById("chat-export");if(e){const t=e.value||"";e.value+=(t?"\n":"")+`${a}: ${c}`}}),s}function updateChatMsgItem(e,t){const{timestamp:n,channel:a,player:c,text:l}=t;e.dataset.channel=a,e.dataset.player=c;const s=e.querySelector(".chat-time");s&&s.textContent!==String(n)&&(s.textContent=String(n));const o=e.querySelector(".chat-channel");o&&(o.dataset.channel!==a&&(o.dataset.channel=a),o.textContent!==a&&(o.textContent=a));const r=e.querySelector(".chat-player");r&&(r.dataset.player!==c&&(r.dataset.player=c),r.textContent!==c&&(r.textContent=c));const d=e.querySelector(".chat-text");d&&d.textContent!==l&&(d.textContent=l)}function updateChat(e){e=JSON.parse(e||"[]");const t=document.getElementById("chat-messages");t&&patchList(t,e.map(e=>{const t=e[0],n=e[1],a=e[2],c=e[3];return{timestamp:t,channel:n,player:a,text:c,uid:makeChatUid(t,n,a,c)}}),{key:e=>e.uid,create:createChatMsgItem,update:updateChatMsgItem,itemSelector:".chat-msg",keepSelection:!1})}function resetChatFilter(){const e=document.getElementById("chat-messages");e&&e.querySelectorAll(".chat-msg").forEach(e=>{e.style.display=""})}function filterChatByChannel(e){const t=document.getElementById("chat-messages");t&&(t.querySelectorAll(".chat-msg").forEach(t=>{t.style.display=t.dataset.channel===e?"":"none"}),document.getElementById("chat-current-filter").textContent=`Clear filter: Channel ${e}`)}function filterChatByPlayer(e){const t=document.getElementById("chat-messages");t&&(t.querySelectorAll(".chat-msg").forEach(t=>{t.style.display=t.dataset.player===e?"":"none"}),document.getElementById("chat-current-filter").textContent=`Clear filter: Player ${e}`)}const currentFilterEl=document.getElementById("chat-current-filter");currentFilterEl.addEventListener("click",()=>{currentFilterEl.textContent="Showing all messages",resetChatFilter()});const clearReportBtn=document.getElementById("btn-clear-reports");clearReportBtn.addEventListener("click",()=>{const e=document.selectedPlayer;A3API.SendAlert(`["clearReports", "${e}"]`)});const timeoutButton=document.getElementById("btn-timeout"),timeoutDurationEl=document.getElementById("timeout-minutes");timeoutDurationEl.addEventListener("change",()=>{let e=timeoutDurationEl.value||15;e>120&&!document.isAdmin&&(timeoutDurationEl.value=120,e=120),timeoutButton.textContent=`Timeout ${document.selectedPlayerName} for ${e} minutes`}),timeoutButton.addEventListener("click",()=>{const e=document.selectedPlayer,t=timeoutDurationEl.value||15,n=document.getElementById("timeout-reason").value||"unsportsmanlike conduct";A3API.SendAlert(`["timeout", "${e}", ${t}, "${n}"]`)});const balanceButton=document.getElementById("btn-rebalance");balanceButton.addEventListener("click",()=>{A3API.SendAlert(`["rebalance", "${document.selectedPlayer}"]`)});const vehiclesButton=document.getElementById("btn-vehicles");vehiclesButton.addEventListener("click",()=>{A3API.SendAlert(`["accessVehicles", "${document.selectedPlayer}"]`)});const gotoButton=document.getElementById("btn-goto");gotoButton.addEventListener("click",()=>{A3API.SendAlert(`["gotoPlayer", "${document.selectedPlayer}"]`)});const seeTransfersButton=document.getElementById("btn-see-transfers");function changeButtons(){document.selectedPlayer;const e=document.selectedPlayerName;timeoutButton.textContent=`Timeout ${e} for ${timeoutDurationEl.value||15} minutes`,balanceButton.textContent=`Rebalance ${e}`}seeTransfersButton.addEventListener("click",()=>{A3API.SendAlert(`["seeTransfers", "${document.selectedPlayer}"]`)}),changeButtons();const modReceiptsBtn=document.getElementById("btn-mod-receipts");modReceiptsBtn.addEventListener("click",()=>{A3API.SendAlert('["modReceipts"]')})</script><script>document.addEventListener("wheel",function(e){const o=document.elementFromPoint(e.clientX,e.clientY);o&&o.closest(".panel")&&(o.closest(".panel").scrollTop+=e.deltaY,e.preventDefault())},{passive:!1});const wrapper=document.querySelector(".menu-wrapper"),header=document.querySelector(".menu-title"),closeButton=document.createElement("div");closeButton.className="close-button",closeButton.innerHTML="&times;",wrapper.appendChild(closeButton),closeButton.addEventListener("mousedown",function(){A3API.SendAlert("exit")});const pos={x1:0,y1:0,x2:0,y2:0},onMouseMove=e=>{e.preventDefault();const{clientX:o,clientY:t}=e;pos.x1=pos.x2-o,pos.y1=pos.y2-t,pos.x2=o,pos.y2=t,wrapper.style.top=wrapper.offsetTop-pos.y1+"px",wrapper.style.left=wrapper.offsetLeft-pos.x1+"px"},onMouseUp=()=>{document.removeEventListener("mouseup",onMouseUp),document.removeEventListener("mousemove",onMouseMove)},onMouseDown=e=>{e.preventDefault(),pos.x2=e.clientX,pos.y2=e.clientY,document.addEventListener("mouseup",onMouseUp),document.addEventListener("mousemove",onMouseMove)};header.addEventListener("mousedown",onMouseDown);const fpsDisplay=document.createElement("div");fpsDisplay.className="fps-display",document.body.appendChild(fpsDisplay);let frameTime=0,frameCount=0,lastLoop=performance.now();const fpsLoop=()=>{const e=performance.now();frameTime+=(e-lastLoop-frameTime)/20,lastLoop=e,frameCount++,requestAnimationFrame(fpsLoop)};setInterval(()=>{fpsDisplay.textContent=frameCount>60?`MENU FPS: ${(1e3/frameTime).toFixed(2)}`:"MENU FPS: -"},100),fpsLoop()</script></body></html>